{% extends 'base_auth.html' %}

{% block title %}Sign Up – Credentials{% endblock %}

{% block meta %}
<meta name="description" content="Sign up to EchoMood with your login credentials.">
<meta name="keywords" content="EchoMood, Login, Sign Up">
<meta name="author" content="EchoMood Team">
{% endblock %}

{% block content %}

<!-- Flash messages block for displaying errors or alerts -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
{% for category, message in messages %}
<div class="flash-message {{ category }}">
    <span class="flash-icon">⚠️</span>
    <span class="flash-text">{{ message }}</span>
    <span class="flash-close" onclick="this.parentElement.classList.add('hide');">&times;</span>
</div>
{% endfor %}
{% endif %}
{% endwith %}

<h2>Sign Up</h2>

<!-- Step 2: Credentials Form -->
<form method="POST" action="{{ url_for('user.signup_login_credentials') }}">
    {{ form.hidden_tag() }}

    <!-- Email Input -->
    <div class="inputBox">
        {{ form.email(class="authentication", placeholder=" ") }}
        <span>Email</span>
    </div>

    <!-- Password Input -->
    <div class="inputBox">
        {{ form.password(class="authentication", placeholder=" ") }}
        <span>Password</span>
    </div>

    <!-- Confirm Password Input -->
    <div class="inputBox">
        {{ form.confirm_password(class="authentication", placeholder=" ") }}
        <span>Confirm Password</span>
    </div>

    <!-- Submit Button -->
    <div class="inputBox">
        {{ form.submit(class="authentication", value="Sign Up") }}
    </div>
</form>

<!-- Already have an account? -->
<div class="group">
    <a href="{{ url_for('user.login') }}">Already have an account? Login</a>
</div>

<!-- Divider -->
<div class="or-divider"><span>OR</span></div>

<!-- Spotify OAuth Button -->
<button type="button" class="inputBox oauth-btn spotify-btn"
    onclick="location.href='{{ url_for('spotify.oauth_spotify') }}'">
    <img src="https://storage.googleapis.com/pr-newsroom-wp/1/2023/05/Spotify_Primary_Logo_RGB_Green.png"
        alt="Spotify logo" class="btn-icon">
    Connect with Spotify
</button>

{% endblock %}